:root{
      --bg:#0b0f14;
      --panel:#0f1620;
      --panel2:#0d131c;
      --text:#e7eef8;
      --muted:#9fb0c5;
      --accent:#7cf4b0;
      --warn:#ffcf5a;
      --bad:#ff6b6b;
      --line:#1f2b3b;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:16px;
      --top-card-height: 680px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;
    }
html,body{height:100%;}
[hidden]{ display:none !important; }
body{
      margin:0;
      background: linear-gradient(180deg, #0b0f14 0%, #0a0e13 55%, #090d12 100%);
      color:var(--text);
      font-family:var(--sans);
    }

    html, body{
      overflow-y:auto;
      overflow-x:hidden;
    }
	    header{
	      width:min(1920px, calc(100vw - 2rem));
	      padding:18px 18px 0 18px;
	      margin:0 auto;
	    }
    .brand{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .title{
      font-size:20px;
      letter-spacing:.2px;
      margin:0;
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .titleHint{
      font-size:12px;
      color:var(--muted);
      line-height:1.4;
    }
    .pill{
      font-size:12px;
      padding:4px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      color:var(--muted);
      background:rgba(255,255,255,.03);
    }
    .sub{
      margin:8px 0 0 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.4;
    }
    main{
	      width:min(1920px, calc(100vw - 2rem));
	      margin:16px auto 32px auto;
	      padding:0 18px;
	      display:grid;
	      grid-template-columns: clamp(320px, 22vw, 420px) minmax(0, 1fr) clamp(320px, 22vw, 420px);
	      gap:clamp(16px, 1.6vw, 28px);
	      align-items:start;
	      grid-auto-flow:row dense;
	    }
    /* Ultra-wide mode: nutzt zusätzliche Fläche, hält Text und Terminal-Zeilen weiterhin gut lesbar. */
    @media (min-width: 1800px){
      main{
        width:min(2280px, calc(100vw - 3rem));
        grid-template-columns: clamp(360px, 20vw, 500px) minmax(0, 1fr) clamp(360px, 20vw, 500px);
        gap:clamp(24px, 1.9vw, 40px);
      }
      .card h2{ font-size:15px; }
      .desc{ font-size:15px; }
      .terminal{
        font-size:14px;
        display:flex;
        flex-direction:column;
        align-items:center;
      }
      .terminal .row{ width:min(100%, 132ch); }
    }
    @media (max-width: 1200px){
      main{grid-template-columns:300px minmax(0, 1fr) 300px; }
    }
    @media (max-width: 1020px){
      main{grid-template-columns:1fr; }
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card h2{
      margin:0;
      padding:14px 14px 10px 14px;
      font-size:14px;
      color:var(--muted);
      letter-spacing:.4px;
      text-transform:uppercase;
      border-bottom:1px solid var(--line);
      background: rgba(0,0,0,.12);
    }
    .card .content{ padding:14px; }
    .locationImage{
      width:100%;
      aspect-ratio: 16/9;
      border-radius:12px;
      border:1px solid var(--line);
      background: var(--panel2);
      overflow:hidden;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
    }
    .locationImage img{ width:100%; height:100%; object-fit:cover; display:block; }
    .locTitle{
      margin:12px 0 4px 0;
      font-size:16px;
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    .tag{
      font-size:12px;
      color:var(--muted);
      padding:4px 10px;
      border-radius:999px;
      background: rgba(124,244,176,.08);
      border:1px solid rgba(124,244,176,.25);
    }
    .desc{ margin:0; line-height:1.45; font-size:14px; }
    .inlineList{ margin:8px 0 0 0; color:var(--muted); font-size:12px; line-height:1.45; }
    .small{ margin:10px 0 0 0; color:var(--muted); font-size:12px; line-height:1.45; }
    .phaseCommands{
      margin-top:12px;
      padding:10px;
      border:1px solid var(--line);
      border-radius:12px;
      background: rgba(0,0,0,.12);
    }
    .phaseCommandsHeader{
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:.4px;
      color:var(--muted);
      margin-bottom:6px;
    }
    .phaseCommandsList{
      list-style:none;
      margin:0;
      padding:0;
      display:flex;
      flex-direction:column;
      gap:6px;
      font-size:12px;
      color:var(--muted);
    }
    .phaseCommandsHint{ margin-top:8px; }
    .nextQuestHint{
      margin-top:12px;
      padding:10px 12px;
      border:1px solid rgba(255,215,127,.45);
      border-radius:10px;
      background: linear-gradient(135deg, rgba(255,215,127,.16), rgba(255,215,127,.06));
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.07), 0 8px 18px rgba(0,0,0,.2);
      font-size:12px;
      line-height:1.45;
      color:#ffe7b2;
    }
    .nextQuestHint a{
      color:var(--accent);
      text-decoration:none;
    }
    .nextQuestHint a:hover,
    .nextQuestHint a:focus-visible{
      text-decoration:underline;
    }
    .objectives{ display:flex; flex-direction:column; gap:10px; }
    .obj{
      border:1px solid var(--line);
      border-radius:12px;
      padding:10px;
      background: rgba(0,0,0,.12);
      display:flex;
      gap:10px;
      align-items:flex-start;
    }
    .dot{
      width:10px; height:10px; border-radius:50%;
      margin-top:4px;
      background: rgba(255,255,255,.25);
      border:1px solid rgba(255,255,255,.18);
      flex:0 0 auto;
    }
    .done .dot{
      background: var(--accent);
      border-color: rgba(124,244,176,.4);
      box-shadow: 0 0 0 4px rgba(124,244,176,.12);
    }
    .current{
      border-color: rgba(124,244,176,.35);
      box-shadow: inset 0 0 0 1px rgba(124,244,176,.18);
    }
    .objTitle{ margin:0; font-size:13px; }
    .objHint{ margin:4px 0 0 0; font-size:12px; color:var(--muted); line-height:1.4;}
    .rewards{
      display:grid;
      grid-template-columns:repeat(2, minmax(0, 1fr));
      gap:10px;
      align-items:stretch;
    }
    .reward{
      border:1px solid var(--line);
      border-radius:14px;
      padding:10px;
      background: rgba(0,0,0,.12);
      display:flex;
      gap:10px;
      align-items:flex-start;
      min-height:64px;
      min-width:0;
    }
    .reward img{
      width:42px;height:42px;border-radius:12px;border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
    }
    .reward > div{min-width:0; flex:1 1 auto;}
    .reward strong{display:block; font-size:13px; line-height:1.3;}
    .reward span{display:block; font-size:12px; color:var(--muted); margin-top:2px; line-height:1.4; word-break:break-word;}
    .terminalWrap{
      display:flex;
      flex-direction:column;
      height: var(--top-card-height);
    }

    .storyCard{
      min-width:0;
      grid-column: 1;
    }
    .storyCard .content{
      height: var(--top-card-height);
      display:flex;
      flex-direction:column;
      overflow-y:auto;
      overflow-x:hidden;
    }
    .terminalCard{
      min-width:0;
      grid-column: 2;
      border-color: rgba(124,244,176,.45);
      box-shadow: 0 12px 36px rgba(0,0,0,.45), 0 0 0 1px rgba(124,244,176,.22);
    }
    .terminalCard h2{
      color: rgba(124,244,176,.92);
      background: linear-gradient(90deg, rgba(124,244,176,.15), rgba(0,0,0,.12) 55%);
      border-bottom-color: rgba(124,244,176,.35);
    }

    .terminalCardHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .clippyBtn{
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-size:11px;
      padding:6px 10px;
      border-color: rgba(124,244,176,.4);
      background: rgba(124,244,176,.14);
      color: rgba(222,255,238,.95);
    }
    .clippyBtn:hover{ border-color: rgba(124,244,176,.75); }
    .clippyBtn[disabled]{
      cursor:not-allowed;
      opacity:.7;
      border-color: rgba(255,180,120,.45);
      background: rgba(255,180,120,.12);
      color: rgba(255,220,190,.92);
    }
    .clippyUsage{
      font-size:11px;
      color:var(--muted);
      white-space:nowrap;
    }
    .clippyStatus{
      font-size:11px;
      color:var(--muted);
      margin-left:auto;
      white-space:nowrap;
    }
    .clippyStatus.isReady{ color: rgba(124,244,176,.9); }
    .clippyStatus.isCooldown{ color: rgba(255,196,135,.95); }

    .clippyTooltip{
      position:fixed;
      z-index:1700;
      width:min(560px, calc(100vw - 24px));
      max-height:min(72vh, 700px);
      overflow:auto;
      border:1px solid rgba(124,244,176,.45);
      border-radius:14px;
      padding:12px;
      background:rgba(12,18,26,.98);
      box-shadow:0 12px 26px rgba(0,0,0,.45);
    }
    .clippyTitle{ margin:0 0 6px 0; font-size:14px; color:var(--accent); }
    .clippySub{ margin:0 0 10px 0; color:var(--muted); font-size:12px; line-height:1.4; }
    .clippySteps{ margin:0; padding-left:18px; font-size:12px; line-height:1.45; }
    .clippySteps li{ margin-bottom:8px; }
    .clippySteps code,
    .clippyHint code{
      display:inline-block;
      font-family:var(--mono);
      font-weight:700;
      color:#b6ffd1;
      background:rgba(124,244,176,.14);
      border:1px solid rgba(124,244,176,.45);
      border-radius:6px;
      padding:1px 6px;
      letter-spacing:.01em;
    }
    .clippyHint{ margin:8px 0 0 0; color:var(--muted); font-size:12px; }
    .clippyActions{ margin-top:12px; display:flex; justify-content:flex-end; }

    .sidequestCard{ grid-column: 2; grid-row: 2; }
    .sidequestCard[hidden]{ display:none; }
    .sidequestCard .content{ min-height: 140px; }
    .objectivesCard{ grid-column: 1; grid-row: 2; }
    .mapCard{ grid-column: 3; grid-row: 1; }
    .rewardsCard{ grid-column: 3; grid-row: 2; }
    @media (max-width: 1020px){
      .storyCard,
      .terminalCard,
      .sidequestCard,
      .mapCard,
      .rewardsCard,
      .objectivesCard{ grid-column: auto; }
    }
    .mapCard .content{
      height: var(--top-card-height);
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .mapTools{
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      gap:8px 12px;
      font-size:11px;
      color:var(--muted);
    }
    .mapTools label{
      display:inline-flex;
      align-items:center;
      gap:4px;
      cursor:pointer;
    }
    .mapLegendItem{ display:inline-flex; align-items:center; gap:3px; }
    .mapLegendDot{ font-family:var(--mono); }
    .mapLegendCurrent{ color:#b8ffd6; }
    .mapLegendVisited{ color:#9fb0c5; }
    .mapLegendQuest{ color:#ffd77f; }
    .mapLegendUnvisited{ color:#7f8ca3; }
    .mapTree{
      margin:0;
      width:100%;
      padding:10px 12px 12px 12px;
      color:var(--text);
      font-family:var(--mono);
      font-size:12px;
      line-height:1.45;
      white-space:pre-wrap;
      overflow:auto;
      flex:1 1 auto;
      border:1px solid var(--line);
      border-radius:12px;
      background: rgba(0,0,0,.26);
    }
    .mapNodeEntry{ cursor:pointer; border-radius:4px; }
    .mapNodeEntry:hover{ background:rgba(91,156,255,.14); }
    .mapCurrentEntry{
      color:#b8ffd6;
      text-shadow:
        0 0 4px rgba(124,244,176,.85),
        0 0 10px rgba(124,244,176,.6),
        0 0 18px rgba(124,244,176,.35);
      font-weight:700;
    }
    .mapQuestEntry{ color:#ffd77f; font-weight:600; }
    .mapUnvisitedEntry{ color:#7f8ca3; }
    @media (max-width: 1020px){
      .terminalWrap{height:auto;}
      .mapCard .content{height:auto;}
      .storyCard .content{height:auto;}
    }

    .terminal{
      flex: 1 1 auto;
      background: rgba(2,9,16,.75);
      border:1px solid rgba(124,244,176,.35);
      border-radius:14px;
      padding:14px 14px 6px 14px;
      box-shadow: inset 0 0 0 1px rgba(124,244,176,.12), 0 10px 24px rgba(0,0,0,.3);
      overflow-y:auto;
      overflow-x:hidden;
      font-family: var(--mono);
      font-size: 13px;
      line-height: 1.45;
      scrollbar-width: thin;
      scrollbar-color: rgba(159,176,197,.45) rgba(255,255,255,.04);
    }
    .terminal::-webkit-scrollbar{ width:8px; }
    .terminal::-webkit-scrollbar-track{
      background: rgba(255,255,255,.04);
      border-radius:999px;
    }
    .terminal::-webkit-scrollbar-thumb{
      background: rgba(159,176,197,.45);
      border-radius:999px;
      border:2px solid transparent;
      background-clip:padding-box;
    }
    .terminal::-webkit-scrollbar-thumb:hover{ background: rgba(159,176,197,.62); }
    .row{ white-space:pre-wrap; word-break:break-word; border-radius:8px; padding:1px 6px; margin:1px 0; }
    .rowLatestInput{
      background: rgba(91,156,255,.14);
      box-shadow: inset 0 0 0 1px rgba(91,156,255,.3);
    }
    .rowLatestOutput{
      background: rgba(124,244,176,.12);
      box-shadow: inset 0 0 0 1px rgba(124,244,176,.28);
    }
    .row .p{ color: var(--muted); }
    .row .ok{ color: var(--accent); }
    .row .warn{ color: var(--warn); }
    .row .bad{ color: var(--bad); }
    .inputBar{
      margin-top:10px;
      display:flex;
      flex-direction:column;
      gap:10px;
      align-items:stretch;
      min-width:0;
      border:1px solid var(--line);
      border-radius:14px;
      padding:10px;
      background: rgba(0,0,0,.18);
      font-family: var(--mono);
    }
    .prompt{
      color: var(--muted);
      font-size:12px;
      width:100%;
      min-width:0;
      white-space:nowrap;
      overflow:hidden;
      direction:ltr;
      text-align:left;
    }
    .inputControls{
      display:flex;
      gap:10px;
      align-items:center;
      min-width:0;
    }
    input[type="text"]{
      flex:1 1 260px;
      min-width:180px;
      border:none;
      outline:none;
      background: transparent;
      color: var(--text);
      font-family: var(--mono);
      font-size: 13px;
    }
    .btn{
      flex:0 0 auto;
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      color: var(--text);
      border-radius:12px;
      padding:8px 10px;
      cursor:pointer;
      font-size:12px;
    }
    .btn:hover{ border-color: rgba(124,244,176,.35); }
    .kbd{
      font-family: var(--mono);
      font-size: 12px;
      padding: 2px 6px;
      border:1px solid var(--line);
      border-bottom-color: rgba(255,255,255,.06);
      border-radius:8px;
      background: rgba(0,0,0,.20);
      color:var(--muted);
    }
    .footerTips{ color: var(--muted); font-size:12px; padding: 10px 2px 0 2px; }
    .hr{
      height:1px; background: var(--line); margin:12px 0;
    }
  
.obj.done .dot{
  background:#3ddc84;
  box-shadow:0 0 0 3px rgba(61,220,132,.25);
}

.doneDot{
  background: var(--accent) !important;
  border-color: rgba(124,244,176,.4) !important;
  box-shadow: 0 0 0 4px rgba(124,244,176,.12) !important;
}

  /* Small pill badges in header */
  .badge{
    display:inline-flex;
    align-items:center;
    gap:.35rem;
    padding:.15rem .55rem;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.22);
    background:rgba(255,255,255,.06);
    font-size:12px;
    line-height:1.6;
    user-select:none;
  }


/* Inline warning hint (start screen) */
.warnInline{ color: rgba(255,190,90,.95); font-weight:600; }


    .okInline{ color:#2e7d32; font-weight:600; }

    .startOverlay{
      position:fixed;
      inset:0;
      background:rgba(4,8,14,.82);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:2000;
      padding:16px;
    }
    .startModal{
      width:min(560px, 100%);
      border:1px solid var(--line);
      border-radius:16px;
      background:linear-gradient(180deg, rgba(15,22,32,.98), rgba(9,14,20,.98));
      box-shadow: var(--shadow);
      padding:18px;
    }
    .startModal h2{ margin:0; }
    .startActions{ display:flex; flex-wrap:wrap; gap:10px; margin-top:14px; }
    .savegameLoad{ margin-top:12px; display:flex; flex-direction:column; gap:8px; }
    .savegameLoad input{
      border:1px solid var(--line);
      border-radius:10px;
      padding:8px 10px;
      background:rgba(255,255,255,.02);
      color:var(--text);
      font-family:var(--mono);
    }



    .cinematicIntroOverlay{
      position:fixed;
      inset:0;
      background:radial-gradient(circle at 50% 20%, rgba(200,40,40,.18), rgba(4,8,14,.9) 48%, rgba(2,4,8,.95));
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:2050;
      padding:16px;
    }
    .cinematicIntroPanel{
      width:min(680px, 100%);
      border:1px solid rgba(255,107,107,.35);
      border-radius:16px;
      background:linear-gradient(180deg, rgba(20,8,12,.97), rgba(10,14,20,.98));
      box-shadow: var(--shadow);
      padding:20px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .cinematicIntroKicker{
      margin:0;
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:.12em;
      color:rgba(255,207,90,.92);
    }
    .cinematicIntroPanel h2{
      margin:0;
      color:#ffd2d2;
      text-shadow:0 0 14px rgba(255,120,120,.24);
    }
    .cinematicIntroText{
      margin:0;
      min-height:120px;
      border:1px solid rgba(255,255,255,.1);
      border-radius:12px;
      background:rgba(0,0,0,.24);
      padding:12px;
      line-height:1.5;
      white-space:pre-line;
    }


    .savegameOverlay{
      position:fixed;
      inset:0;
      background:rgba(4,8,14,.82);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:2100;
      padding:16px;
    }
    .savegamePanel{
      width:min(640px, 100%);
      border:1px solid var(--line);
      border-radius:16px;
      background:linear-gradient(180deg, rgba(15,22,32,.98), rgba(9,14,20,.98));
      box-shadow: var(--shadow);
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .savegamePanel h2{ margin:0; }
    .savegamePanel textarea{
      width:100%;
      min-height:84px;
      border:1px solid var(--line);
      border-radius:10px;
      padding:10px;
      background:rgba(255,255,255,.02);
      color:var(--text);
      font-family:var(--mono);
      resize:vertical;
    }

    .tutorialOverlay{
      position:fixed;
      inset:0;
      z-index:1500;
      pointer-events:none;
      background:rgba(5,8,14,.58);
    }
    .tutorialBubble{
      position:fixed;
      z-index:1600;
      max-width:420px;
      border:1px solid rgba(124,244,176,.35);
      border-radius:14px;
      padding:12px;
      background:rgba(12,18,26,.98);
      box-shadow:0 12px 26px rgba(0,0,0,.4);
    }
    .tutorialBubble p{ margin:0 0 10px 0; font-size:13px; line-height:1.45; }
    .tutorialCommand{
      display:inline-block;
      font-family:var(--mono);
      font-weight:700;
      color:#b6ffd1;
      background:rgba(124,244,176,.14);
      border:1px solid rgba(124,244,176,.45);
      border-radius:6px;
      padding:1px 6px;
      letter-spacing:.01em;
    }
    .tutorialFocus{ position:relative; z-index:1550; box-shadow:0 0 0 2px rgba(124,244,176,.6), 0 0 0 9999px rgba(5,8,14,.58); }
    .tutorialInputFocus{ box-shadow:0 0 0 2px rgba(124,244,176,.75); border-radius:12px; }
